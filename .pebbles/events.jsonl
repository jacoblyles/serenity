{"type":"create","timestamp":"2026-02-14T04:33:23.831453Z","issue_id":"darkside2-b53","payload":{"description":"","priority":"1","title":"Darkside Chrome Extension","type":"epic"}}
{"type":"create","timestamp":"2026-02-14T04:33:35.957957Z","issue_id":"darkside2-b18","payload":{"description":"","priority":"1","title":"Project scaffolding: Manifest V3, popup, background worker, content script","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:35.980981Z","issue_id":"darkside2-a41","payload":{"description":"","priority":"1","title":"Content script: extract DOM structure + computed styles (sanitized, no form values)","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:36.004839Z","issue_id":"darkside2-ad5","payload":{"description":"","priority":"1","title":"LLM abstraction layer: unified interface for Anthropic, OpenAI, Google, custom endpoints","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:36.028846Z","issue_id":"darkside2-3a3","payload":{"description":"","priority":"1","title":"Dark mode CSS generation: send page context to LLM, parse and apply returned CSS","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:36.055968Z","issue_id":"darkside2-697","payload":{"description":"","priority":"1","title":"Style storage: save/load dark mode CSS per-domain with page-level overrides in chrome.storage","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:36.081401Z","issue_id":"darkside2-135","payload":{"description":"","priority":"2","title":"Popup UI: toggle button, auto-mode toggle, feedback textbox, model selector","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:36.106747Z","issue_id":"darkside2-0e5","payload":{"description":"","priority":"2","title":"Settings page: manage LLM providers, API keys, OAuth, models, set defaults","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:36.131536Z","issue_id":"darkside2-744","payload":{"description":"","priority":"2","title":"Feedback loop: send user feedback + current CSS to LLM for refinement","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:36.157037Z","issue_id":"darkside2-e3f","payload":{"description":"","priority":"2","title":"Auto mode: detect new sites, auto-generate and apply dark mode on page load","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:36.185112Z","issue_id":"darkside2-9f6","payload":{"description":"","priority":"2","title":"Anthropic OAuth flow integration","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:36.216022Z","issue_id":"darkside2-f0e","payload":{"description":"","priority":"1","title":"Apply remembered dark mode styles on page load for known domains","type":"task"}}
{"type":"create","timestamp":"2026-02-14T04:33:36.24499Z","issue_id":"darkside2-826","payload":{"description":"","priority":"3","title":"Quick model switch from popup for retrying difficult sites with stronger models","type":"task"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.362175Z","issue_id":"darkside2-b18","payload":{"new_id":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.362178Z","issue_id":"darkside2-b53.1","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.399941Z","issue_id":"darkside2-a41","payload":{"new_id":"darkside2-b53.2"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.399944Z","issue_id":"darkside2-b53.2","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.438941Z","issue_id":"darkside2-ad5","payload":{"new_id":"darkside2-b53.3"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.438945Z","issue_id":"darkside2-b53.3","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.476246Z","issue_id":"darkside2-3a3","payload":{"new_id":"darkside2-b53.4"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.47625Z","issue_id":"darkside2-b53.4","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.517944Z","issue_id":"darkside2-697","payload":{"new_id":"darkside2-b53.5"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.51795Z","issue_id":"darkside2-b53.5","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.560361Z","issue_id":"darkside2-135","payload":{"new_id":"darkside2-b53.6"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.560365Z","issue_id":"darkside2-b53.6","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.600905Z","issue_id":"darkside2-0e5","payload":{"new_id":"darkside2-b53.7"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.600909Z","issue_id":"darkside2-b53.7","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.648774Z","issue_id":"darkside2-744","payload":{"new_id":"darkside2-b53.8"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.648778Z","issue_id":"darkside2-b53.8","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.693699Z","issue_id":"darkside2-e3f","payload":{"new_id":"darkside2-b53.9"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.693703Z","issue_id":"darkside2-b53.9","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.737101Z","issue_id":"darkside2-9f6","payload":{"new_id":"darkside2-b53.10"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.737104Z","issue_id":"darkside2-b53.10","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.813021Z","issue_id":"darkside2-f0e","payload":{"new_id":"darkside2-b53.11"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.813026Z","issue_id":"darkside2-b53.11","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"rename","timestamp":"2026-02-14T04:33:42.870621Z","issue_id":"darkside2-826","payload":{"new_id":"darkside2-b53.12"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:42.870626Z","issue_id":"darkside2-b53.12","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:50.666542Z","issue_id":"darkside2-b53.2","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:50.705794Z","issue_id":"darkside2-b53.3","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:50.756936Z","issue_id":"darkside2-b53.4","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.2"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:50.795585Z","issue_id":"darkside2-b53.4","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.3"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:50.837606Z","issue_id":"darkside2-b53.5","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:50.889577Z","issue_id":"darkside2-b53.6","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:50.931059Z","issue_id":"darkside2-b53.7","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:50.974029Z","issue_id":"darkside2-b53.8","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.4"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:51.035402Z","issue_id":"darkside2-b53.8","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.6"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:51.097Z","issue_id":"darkside2-b53.9","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.4"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:51.159302Z","issue_id":"darkside2-b53.9","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.5"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:51.203552Z","issue_id":"darkside2-b53.10","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.3"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:51.246146Z","issue_id":"darkside2-b53.10","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.7"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:51.286727Z","issue_id":"darkside2-b53.11","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.5"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:51.333595Z","issue_id":"darkside2-b53.12","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.6"}}
{"type":"dep_add","timestamp":"2026-02-14T04:33:51.377606Z","issue_id":"darkside2-b53.12","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.7"}}
{"type":"create","timestamp":"2026-02-14T04:34:46.668901Z","issue_id":"darkside2-050","payload":{"description":"","priority":"2","title":"Image attachment in feedback: allow user to paste/upload screenshots alongside text feedback","type":"task"}}
{"type":"rename","timestamp":"2026-02-14T04:34:50.368958Z","issue_id":"darkside2-050","payload":{"new_id":"darkside2-b53.13"}}
{"type":"dep_add","timestamp":"2026-02-14T04:34:50.368962Z","issue_id":"darkside2-b53.13","payload":{"dep_type":"parent-child","depends_on":"darkside2-b53"}}
{"type":"dep_add","timestamp":"2026-02-14T04:34:50.418748Z","issue_id":"darkside2-b53.13","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.8"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:16.570046Z","issue_id":"darkside2-b53.2","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:16.615596Z","issue_id":"darkside2-b53.3","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:16.6583Z","issue_id":"darkside2-b53.5","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:16.729635Z","issue_id":"darkside2-b53.6","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:16.776903Z","issue_id":"darkside2-b53.7","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.1"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:16.824681Z","issue_id":"darkside2-b53.4","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.2"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:16.896121Z","issue_id":"darkside2-b53.4","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.3"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:16.948618Z","issue_id":"darkside2-b53.11","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.5"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:16.992926Z","issue_id":"darkside2-b53.8","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.4"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:17.042993Z","issue_id":"darkside2-b53.8","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.6"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:17.100968Z","issue_id":"darkside2-b53.9","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.4"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:17.145739Z","issue_id":"darkside2-b53.9","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.5"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:17.191436Z","issue_id":"darkside2-b53.10","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.7"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:17.242454Z","issue_id":"darkside2-b53.12","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.6"}}
{"type":"dep_add","timestamp":"2026-02-14T04:43:17.3131Z","issue_id":"darkside2-b53.13","payload":{"dep_type":"blocks","depends_on":"darkside2-b53.8"}}
{"type":"status_update","timestamp":"2026-02-14T04:43:51.741471Z","issue_id":"darkside2-b53.1","payload":{"status":"in_progress"}}
{"type":"close","timestamp":"2026-02-14T04:44:57.069295Z","issue_id":"darkside2-b53.1","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:45:37.484652Z","issue_id":"darkside2-b53.1","payload":{}}
{"type":"status_update","timestamp":"2026-02-14T04:45:58.223795Z","issue_id":"darkside2-b53.6","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-14T04:45:58.583733Z","issue_id":"darkside2-b53.2","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-14T04:45:59.080715Z","issue_id":"darkside2-b53.3","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-14T04:45:59.544139Z","issue_id":"darkside2-b53.5","payload":{"status":"in_progress"}}
{"type":"close","timestamp":"2026-02-14T04:46:43.629785Z","issue_id":"darkside2-b53.2","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:47:07.55491Z","issue_id":"darkside2-b53.5","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:47:20.659755Z","issue_id":"darkside2-b53.6","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:47:25.667598Z","issue_id":"darkside2-b53.3","payload":{}}
{"type":"status_update","timestamp":"2026-02-14T04:49:46.45996Z","issue_id":"darkside2-b53.4","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-14T04:49:47.76642Z","issue_id":"darkside2-b53.11","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-14T04:49:48.7136Z","issue_id":"darkside2-b53.7","payload":{"status":"in_progress"}}
{"type":"close","timestamp":"2026-02-14T04:50:48.454845Z","issue_id":"darkside2-b53.4","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:51:01.88157Z","issue_id":"darkside2-b53.11","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:52:39.186832Z","issue_id":"darkside2-b53.7","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:53:31.285195Z","issue_id":"darkside2-b53.4","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:53:31.339073Z","issue_id":"darkside2-b53.7","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:53:31.398714Z","issue_id":"darkside2-b53.11","payload":{}}
{"type":"status_update","timestamp":"2026-02-14T04:53:56.32581Z","issue_id":"darkside2-b53.8","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-14T04:53:58.987481Z","issue_id":"darkside2-b53.10","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-14T04:54:00.917405Z","issue_id":"darkside2-b53.12","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-14T04:54:03.356993Z","issue_id":"darkside2-b53.9","payload":{"status":"in_progress"}}
{"type":"close","timestamp":"2026-02-14T04:55:18.240967Z","issue_id":"darkside2-b53.8","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:55:24.101211Z","issue_id":"darkside2-b53.9","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:55:29.169691Z","issue_id":"darkside2-b53.12","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:55:42.258561Z","issue_id":"darkside2-b53.10","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:57:29.369101Z","issue_id":"darkside2-b53.8","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:57:29.425309Z","issue_id":"darkside2-b53.9","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:57:29.476107Z","issue_id":"darkside2-b53.10","payload":{}}
{"type":"close","timestamp":"2026-02-14T04:57:29.530324Z","issue_id":"darkside2-b53.12","payload":{}}
{"type":"status_update","timestamp":"2026-02-14T04:57:50.090061Z","issue_id":"darkside2-b53.13","payload":{"status":"in_progress"}}
{"type":"close","timestamp":"2026-02-14T05:01:57.274041Z","issue_id":"darkside2-b53.13","payload":{}}
{"type":"close","timestamp":"2026-02-14T05:02:11.800904Z","issue_id":"darkside2-b53.13","payload":{}}
{"type":"close","timestamp":"2026-02-14T05:02:11.866628Z","issue_id":"darkside2-b53","payload":{}}
{"type":"create","timestamp":"2026-02-14T13:11:39.829914Z","issue_id":"darkside2-1e4","payload":{"description":"","priority":"1","title":"Fix unhandled promise rejection in service worker message listener","type":"bug"}}
{"type":"create","timestamp":"2026-02-14T13:11:39.904483Z","issue_id":"darkside2-f8f","payload":{"description":"","priority":"1","title":"Move Google API key from URL query param to header","type":"bug"}}
{"type":"create","timestamp":"2026-02-14T13:11:40.021607Z","issue_id":"darkside2-eea","payload":{"description":"","priority":"2","title":"Use innerText instead of textContent in DOM extraction","type":"bug"}}
{"type":"create","timestamp":"2026-02-14T13:11:40.099219Z","issue_id":"darkside2-58e","payload":{"description":"","priority":"2","title":"Validate custom endpoint URLs are HTTPS","type":"task"}}
{"type":"create","timestamp":"2026-02-14T13:11:40.204705Z","issue_id":"darkside2-e99","payload":{"description":"","priority":"2","title":"Extract shared provider config and settings merge into common module","type":"task"}}
{"type":"create","timestamp":"2026-02-14T13:11:40.324821Z","issue_id":"darkside2-42a","payload":{"description":"","priority":"3","title":"Split service-worker.js into focused modules","type":"task"}}
{"type":"create","timestamp":"2026-02-14T13:11:40.413958Z","issue_id":"darkside2-f63","payload":{"description":"","priority":"2","title":"Add generate dark mode button to popup UI","type":"feature"}}
{"type":"create","timestamp":"2026-02-14T13:11:40.491233Z","issue_id":"darkside2-d13","payload":{"description":"","priority":"1","title":"Rename extension from Darkside to Serenity","type":"task"}}
{"type":"create","timestamp":"2026-02-14T13:11:40.555114Z","issue_id":"darkside2-959","payload":{"description":"","priority":"3","title":"Add eslint config and web-ext dev setup","type":"task"}}
{"type":"create","timestamp":"2026-02-14T13:11:40.670524Z","issue_id":"darkside2-f7a","payload":{"description":"","priority":"3","title":"Add loading and error states to popup UI","type":"task"}}
{"type":"close","timestamp":"2026-02-14T13:17:07.093999Z","issue_id":"darkside2-1e4","payload":{}}
{"type":"close","timestamp":"2026-02-14T13:17:07.177683Z","issue_id":"darkside2-d13","payload":{}}
{"type":"close","timestamp":"2026-02-14T13:17:07.251816Z","issue_id":"darkside2-f8f","payload":{}}
{"type":"close","timestamp":"2026-02-14T13:17:07.373299Z","issue_id":"darkside2-58e","payload":{}}
{"type":"close","timestamp":"2026-02-14T13:17:07.467047Z","issue_id":"darkside2-e99","payload":{}}
{"type":"close","timestamp":"2026-02-14T13:17:07.576342Z","issue_id":"darkside2-eea","payload":{}}
{"type":"close","timestamp":"2026-02-14T13:17:07.740533Z","issue_id":"darkside2-f63","payload":{}}
{"type":"comment","timestamp":"2026-02-14T13:17:13.499633Z","issue_id":"darkside2-42a","payload":{"body":"Skipped: Splitting service-worker.js into modules is useful but high refactor risk right now; current review priorities were reliability/security fixes and targeted P2 improvements."}}
{"type":"close","timestamp":"2026-02-14T13:17:13.560575Z","issue_id":"darkside2-42a","payload":{}}
{"type":"comment","timestamp":"2026-02-14T13:17:13.643371Z","issue_id":"darkside2-959","payload":{"body":"Skipped: Adding eslint/web-ext setup is tooling-focused and lower immediate product value than the shipped bug/security fixes in this pass."}}
{"type":"close","timestamp":"2026-02-14T13:17:13.71664Z","issue_id":"darkside2-959","payload":{}}
{"type":"comment","timestamp":"2026-02-14T13:17:13.783392Z","issue_id":"darkside2-f7a","payload":{"body":"Skipped: Popup already surfaces save/load/generate status/errors, and deeper loading-state UI polish is optional P3 and lower value than completed P1/P2 work."}}
{"type":"close","timestamp":"2026-02-14T13:17:13.840812Z","issue_id":"darkside2-f7a","payload":{}}
{"type":"create","timestamp":"2026-02-21T02:05:34.686056Z","issue_id":"darkside2-381","payload":{"description":"Replace single-column settings layout with sidebar + content area. Add vertical nav tabs on left edge for: Providers, Prompts, Sites, Debug. Each tab has SVG icon + label. Active tab highlighted with accent color. Responsive: collapses to horizontal tabs below 700px. Save/Reset bar repositioned to content area (hidden on Sites/Debug tabs which save immediately). Files: options.html, options.css, options.js","priority":"1","title":"Settings redesign: vertical tab navigation","type":"task"}}
{"type":"create","timestamp":"2026-02-21T02:05:36.611647Z","issue_id":"darkside2-fde","payload":{"description":"Evolve darkModeStyles storage schema to v2 with version history. Each domain/page stores array of versions (max 8) with metadata: id, css, timestamp, provider, model. activeVersionId tracks which version is applied. Create src/shared/style-storage.js with migration logic (v1 to v2), constants (SCHEMA_VERSION, MAX_VERSIONS, STYLE_STORAGE_KEY). Update service-worker.js: loadStyleStorage() calls ensureMigratedStyles(), handleSaveStoredStyle() pushes new version instead of overwriting, getStoredStyleForParsedUrl() resolves from activeVersionId, handleDeleteStoredStyle() adapted for v2. Update popup.js: pass provider/model in save-stored-style messages.","priority":"1","title":"Version history for dark mode styles","type":"feature"}}
{"type":"create","timestamp":"2026-02-21T02:05:38.228641Z","issue_id":"darkside2-f8b","payload":{"description":"New Sites tab in settings to manage generated dark mode styles. Shows list of all domains with saved styles. Each site card has: first-letter avatar, domain name, version count, page count. Click to expand version list (newest first). Each version shows: active badge, timestamp, provider/model, CSS preview (truncated). Actions per version: Activate (set as active), Delete. Delete all button per domain. Empty state when no sites. Lazy-loads data on first tab visit. Saves immediately (no Save/Reset needed). Files: options.html, options.css, options.js. Depends on version history schema and tab navigation.","priority":"1","title":"Sites management tab in settings","type":"feature"}}
{"type":"dep_add","timestamp":"2026-02-21T02:05:42.664963Z","issue_id":"darkside2-f8b","payload":{"dep_type":"blocks","depends_on":"darkside2-fde"}}
{"type":"dep_add","timestamp":"2026-02-21T02:05:42.750154Z","issue_id":"darkside2-f8b","payload":{"dep_type":"blocks","depends_on":"darkside2-381"}}
{"type":"status_update","timestamp":"2026-02-21T02:06:58.035975Z","issue_id":"darkside2-381","payload":{"status":"in_progress"}}
{"type":"status_update","timestamp":"2026-02-21T02:07:04.435466Z","issue_id":"darkside2-fde","payload":{"status":"in_progress"}}
{"type":"close","timestamp":"2026-02-21T02:09:22.58926Z","issue_id":"darkside2-fde","payload":{}}
{"type":"close","timestamp":"2026-02-21T02:11:12.190772Z","issue_id":"darkside2-381","payload":{}}
{"type":"close","timestamp":"2026-02-21T02:44:43.895547Z","issue_id":"darkside2-fde","payload":{}}
{"type":"close","timestamp":"2026-02-21T02:44:43.895547Z","issue_id":"darkside2-381","payload":{}}
{"type":"close","timestamp":"2026-02-21T02:44:43.895547Z","issue_id":"darkside2-f8b","payload":{}}
{"type":"create","timestamp":"2026-02-21T14:58:16.647432Z","issue_id":"darkside2-eb8","payload":{"description":"New content script message type 'inspect-elements'. Takes {selector, limit}, returns array of computed styles (color, backgroundColor, fontSize, border*, display, position, visibility, opacity, bounding rect) for matching elements. Limit defaults to 10.","priority":"1","title":"Content script: inspect-elements handler","type":"task"}}
{"type":"create","timestamp":"2026-02-21T14:58:16.725655Z","issue_id":"darkside2-666","payload":{"description":"New content script message type 'get-color-palette'. Walks visible DOM elements, extracts unique color/backgroundColor/borderColor values, groups into categories: backgrounds, text, accents, borders. Returns summary object.","priority":"1","title":"Content script: get-color-palette handler","type":"task"}}
{"type":"create","timestamp":"2026-02-21T14:58:16.763833Z","issue_id":"darkside2-5cb","payload":{"description":"New content script message type 'query-elements'. Takes {description} (natural language like 'navigation sidebar', 'code blocks'). Uses heuristic matching on tag names, roles, aria labels, class names, and position to find matching elements. Returns selectors with computed styles.","priority":"2","title":"Content script: query-elements handler","type":"task"}}
{"type":"create","timestamp":"2026-02-21T14:58:16.80408Z","issue_id":"darkside2-a81","payload":{"description":"Utility function to capture and resize screenshots via chrome.tabs.captureVisibleTab(). Resize to max 800px wide before base64 encoding to manage token costs. Include scroll-and-capture variant that scrolls to a Y offset first.","priority":"1","title":"Service worker: screenshot capture utility","type":"task"}}
{"type":"create","timestamp":"2026-02-21T14:58:16.843709Z","issue_id":"darkside2-e67","payload":{"description":"Pure function that calculates WCAG 2.1 contrast ratio between two colors. Returns {ratio, aa, aaa}. No DOM needed — runs in service worker. Used by the agent to validate its CSS choices.","priority":"2","title":"Service worker: check_contrast utility","type":"task"}}
{"type":"create","timestamp":"2026-02-21T14:58:16.881995Z","issue_id":"darkside2-55d","payload":{"description":"Extend completeLlmRequest() or create wrapper to support tool/function calling. Must handle: passing tool definitions alongside messages, parsing tool_calls from responses, normalizing format across OpenAI/Anthropic/Google providers. Fall back gracefully for providers that don't support tools.","priority":"0","title":"LLM client: tool calling support","type":"task"}}
{"type":"create","timestamp":"2026-02-21T14:58:16.922148Z","issue_id":"darkside2-7b2","payload":{"description":"New module implementing runAgentLoop(config). Manages multi-turn message history, calls completeLlmRequest() each turn with tool definitions, executes tool calls via content script, appends results, returns final CSS when model stops calling tools. Configurable turn cap (default 5). Includes system prompt for dark mode agent.","priority":"0","title":"Agent loop: src/background/agent.js","type":"task"}}
{"type":"create","timestamp":"2026-02-21T14:58:16.963226Z","issue_id":"darkside2-a97","payload":{"description":"Replace single-shot completeLlmRequest() call in generateAndApplyDarkMode() with the new agent loop. Detect provider tool-calling capability and fall back to single-shot for unsupported providers. Pass initial screenshot + DOM summary to first turn.","priority":"1","title":"Wire agent loop into generation pipeline","type":"task"}}
{"type":"create","timestamp":"2026-02-21T14:58:17.004384Z","issue_id":"darkside2-107","payload":{"description":"Show step-by-step progress during agentic generation: 'Analyzing page...' → 'Generating CSS...' → 'Refining (round N)...' → 'Done'. Update status text as agent loop progresses.","priority":"2","title":"Popup: generation progress indicators","type":"task"}}
{"type":"create","timestamp":"2026-02-21T14:58:17.044405Z","issue_id":"darkside2-af7","payload":{"description":"Add settings to options page: max turns (default 5), toggle for agentic vs quick mode as default. Store in llmSettings.","priority":"3","title":"Options: agentic mode settings","type":"task"}}
{"type":"create","timestamp":"2026-02-21T15:11:49.716495Z","issue_id":"darkside2-191","payload":{"description":"Content script: enumerate @media (prefers-color-scheme: dark) rules from document.styleSheets, strip the media query wrapper, inject as regular CSS. If extracted CSS \u003e 500 bytes, skip LLM generation entirely. ~50 LOC.","priority":"0","title":"Phase 0a: Extract and apply prefers-color-scheme dark rules","type":"task"}}
{"type":"create","timestamp":"2026-02-21T15:11:49.767348Z","issue_id":"darkside2-066","payload":{"description":"Content script: read all --* properties from :root computed style and stylesheet rules. Group by purpose (bg, text, accent, border). Pass to LLM as structured custom property map. ~80 LOC.","priority":"0","title":"Phase 0b: CSS custom property extraction","type":"task"}}
{"type":"create","timestamp":"2026-02-21T15:11:49.811156Z","issue_id":"darkside2-ea1","payload":{"description":"Replace truncated DOM tree (260 nodes, depth 5) with a compact color map: deduplicated selectors with their computed color properties. Far more compact and directly useful for dark mode generation. ~150 LOC.","priority":"0","title":"Phase 0c: Color-map DOM context","type":"task"}}
{"type":"create","timestamp":"2026-02-21T15:11:49.852355Z","issue_id":"darkside2-b99","payload":{"description":"Automate generate→screenshot→refine: (1) generate CSS with color map context, (2) apply + capture screenshot via captureVisibleTab, (3) send screenshot + CSS back with refine prompt. Handle captureVisibleTab failures gracefully (skip screenshot if tab not focused). Wait rAF+150ms after injection before capture. ~200 LOC.","priority":"1","title":"Phase 1: Two-pass generation","type":"task"}}
{"type":"create","timestamp":"2026-02-21T15:11:49.892279Z","issue_id":"darkside2-732","payload":{"description":"Add telemetry to measure generation quality: generation time, CSS length, provider/model used, number of refine rounds, whether native dark mode was found. Store in chrome.storage.local for analysis.","priority":"2","title":"Phase 2: Generation instrumentation","type":"task"}}
{"type":"close","timestamp":"2026-02-21T15:12:02.442906Z","issue_id":"darkside2-eb8","payload":{}}
{"type":"close","timestamp":"2026-02-21T15:12:02.492208Z","issue_id":"darkside2-666","payload":{}}
{"type":"close","timestamp":"2026-02-21T15:12:02.53657Z","issue_id":"darkside2-5cb","payload":{}}
{"type":"close","timestamp":"2026-02-21T15:12:02.578937Z","issue_id":"darkside2-a81","payload":{}}
{"type":"close","timestamp":"2026-02-21T15:12:02.619223Z","issue_id":"darkside2-a97","payload":{}}
{"type":"close","timestamp":"2026-02-21T15:12:02.661328Z","issue_id":"darkside2-107","payload":{}}
{"type":"close","timestamp":"2026-02-21T15:12:02.703826Z","issue_id":"darkside2-af7","payload":{}}
